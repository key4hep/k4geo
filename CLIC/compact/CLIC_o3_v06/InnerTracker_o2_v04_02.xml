<lccdd>
    <define>
    
        <constant name="InnerTracker_Barrel_radius_0" value="127*mm"/>
        <constant name="InnerTracker_Barrel_radius_1" value="340*mm"/>
        <constant name="InnerTracker_Barrel_radius_2" value="554*mm"/>
                
        <constant name="InnerTracker_Barrel_half_length_0" value="482*mm"/>
        <constant name="InnerTracker_Barrel_half_length_1" value="482*mm"/>
        <constant name="InnerTracker_Barrel_half_length_2" value="692*mm"/>
        
        <constant name="InnerTracker_Endcap_z_0" value="524*mm"/>
        <constant name="InnerTracker_Endcap_z_1" value="808*mm"/>
        <constant name="InnerTracker_Endcap_z_2" value="1093*mm"/>
        <constant name="InnerTracker_Endcap_z_3" value="1377*mm"/>
        <constant name="InnerTracker_Endcap_z_4" value="1661*mm"/>
        <constant name="InnerTracker_Endcap_z_5" value="1946*mm"/>
        <constant name="InnerTracker_Endcap_z_6" value="2190*mm"/>


        <constant name="InnerTracker_Endcap_radius_0" value="72*mm"/>
        <constant name="InnerTracker_Endcap_radius_1" value="99*mm"/>
        <constant name="InnerTracker_Endcap_radius_2" value="132*mm"/>
        <constant name="InnerTracker_Endcap_radius_3" value="164*mm"/>
        <constant name="InnerTracker_Endcap_radius_4" value="197*mm"/>
        <constant name="InnerTracker_Endcap_radius_5" value="231*mm"/>
        <constant name="InnerTracker_Endcap_radius_6" value="250*mm"/>
        
        <constant name="ITM" value="15.1*mm"/>
                
    </define>
    
    
    <comment>Tracking detectors</comment>
    <detectors>
        <detector name="InnerTrackers" type="DD4hep_SubdetectorAssembly" vis="ITVis">

            <shape type="BooleanShape" operation="Subtraction" material="Air" >
                <shape type="BooleanShape" operation="Subtraction">
                    <shape type="BooleanShape" operation="Subtraction">
                        <shape type="BooleanShape" operation="Subtraction">
                            <shape type="BooleanShape" operation="Subtraction">
                                <shape type="BooleanShape" operation="Subtraction"  >
                                    <shape type="Tube" rmin="CentralBeamPipe_rmax" rmax="InnerTracker_outer_radius" dz="InnerTracker_half_length+env_safety"/>
                                    <shape type="Cone" rmin1="0" rmax1="CentralBeamPipe_rmax" rmin2="0" rmax2="ConeBeamPipe_rmax" z="(ConeBeamPipe_zmax-CentralBeamPipe_zmax)/2.0"/>
                                    <position x="0" y="0" z="(ConeBeamPipe_zmax-CentralBeamPipe_zmax)/2.0 + CentralBeamPipe_zmax" />
                                </shape>
                                <shape type="Cone" rmin2="0" rmax2="CentralBeamPipe_rmax" rmin1="0" rmax1="ConeBeamPipe_rmax" z="(ConeBeamPipe_zmax-CentralBeamPipe_zmax)/2.0"/>
                                <position x="0" y="0" z="-(ConeBeamPipe_zmax-CentralBeamPipe_zmax)/2.0 - CentralBeamPipe_zmax" />
                            </shape>
                            <shape type="Tube" rmin="0" rmax="ConeBeamPipe_rmax" dz="(InnerTracker_half_length-ConeBeamPipe_zmax)/2.0+10*env_safety"/>
                            <position x="0" y="0" z="(InnerTracker_half_length-ConeBeamPipe_zmax)/2.0+ConeBeamPipe_zmax+10*env_safety" />
                        </shape>
                        <shape type="Tube" rmin="0" rmax="ConeBeamPipe_rmax" dz="(InnerTracker_half_length-ConeBeamPipe_zmax)/2.0+10*env_safety"/>
                        <position x="0" y="0" z="-(InnerTracker_half_length-ConeBeamPipe_zmax)/2.0-ConeBeamPipe_zmax-10*env_safety" />
                    </shape>
                    <shape type="Tube" rmin="0" rmax="Vertex_outer_radius" dz="Vertex_half_length"/>
                </shape>
                <shape type="Tube" rmin="Vertex_inner_radius+0.3*cm" rmax="Vertex_outer_radius" dz="Vertex_half_length+0.5*cm"/>
            </shape>
            
            
            <comment>Inner Tracker Assembly</comment>
            <composite name="InnerTrackerBarrel"/>
            <composite name="InnerTrackerEndcap"/>
            <composite name="InnerTrackerBarrelSupport"/>
            <composite name="InnerTrackerEndcapSupport"/>       
            <composite name="InnerTrackerInterlink"/>       
            <composite name="BeampipeShell"/>                        
        </detector>
    </detectors>
    
    
    <display>
        <vis name="InnerTrackerLayerVis"   alpha="1.0" r="1.0" g="1.0" b="0.6" showDaughters="true" visible="true"/>
        <vis name="InnerTrackerModuleVis"  alpha="0.1" r="0.0" g="1.0" b="0.6" showDaughters="false" visible="true"/>
        <vis name="InnerTrackerForwardVis" alpha="1.0" r="0.8" g="0.1" b="0.1" showDaughters="false" visible="true"/>
        <vis name="RedVis" alpha="1.0" r="1" g="0" b="0" showDaughters="true" visible="true"/>
        <vis name="BlueVis" alpha="1.0" r="0" g="0" b="1" showDaughters="true" visible="true"/>
        <vis name="InterlinkVis" alpha="1.0" r="0.078" g="0.12" b="0.59" showDaughters="true" visible="true"/>
    </display>
    
    <!--  Definition of the readout segmentation/definition  -->
    <readouts>
        <readout name="InnerTrackerBarrelCollection">
            <id>system:5,side:-2,layer:6,module:8,sensor:8,barrel:3</id>
        </readout>
        <readout name="InnerTrackerEndcapCollection">
            <id>system:5,side:-2,layer:6,module:8,sensor:8,barrel:3</id>
        </readout>
    </readouts>
    
    <detectors>
        <detector id="DetID_IT_Barrel" name="InnerTrackerBarrel" type="TrackerBarrel_o1_v04" readout="InnerTrackerBarrelCollection" region="InnerTrackerBarrelRegion">
            <envelope vis="ITVis">
                <shape type="Assembly"/>
            </envelope>
            <comment>Silicon Inner Tracker Barrel</comment>
            
            <type_flags type=" DetType_TRACKER + DetType_BARREL"/>

            <module name="InnerTrackerBarrelModule_01" vis="InnerTrackerModuleVis">
                <module_envelope width="30.1*mm" length="30.1*mm"/>
                <!-- Build slices top-down from innermost slice (closest to IP) to outer-most (away from IP)-->
                <module_component thickness="0.05*mm"  material="Aluminum"        sensitive="false"/>
                <module_component thickness="0.1*mm"   material="Kapton"          sensitive="false"/>                
                <module_component thickness="0.12*mm"  material="CarbonFiber_D"   sensitive="false"/>
                <module_component thickness="0.3*mm"   material="Silicon"         sensitive="true"/> 
                <module_component thickness="0.1*mm"   material="Epoxy"           sensitive="false"/> 

                <module_component thickness="0.11*mm"  material="Graphite"        sensitive="false"/>                                                
                <module_component thickness="0.11*mm"  material="Graphite"        sensitive="false"/>                                                
                <module_component thickness="0.1*mm"   material="Kapton"          sensitive="false"/>                                                  
                <module_component thickness="0.12*mm"  material="CarbonFiber"     sensitive="false"/> 
                <module_component thickness="0.1*mm"   material="Epoxy"           sensitive="false"/>                

                <module_component thickness="0.2*mm"   material="Aluminum"        sensitive="false"/>           
                <module_component thickness="0.2*mm"   material="Kapton"          sensitive="false"/>
                <module_component thickness="0.1*mm"   material="Epoxy"           sensitive="false"/>       
            </module>
 
            <layer module="InnerTrackerBarrelModule_01" id="0" vis="InnerTrackerLayerVis" type="4">
                <rphi_layout phi_tilt="0*deg" nphi="14*2" phi0="0" rc="InnerTracker_Barrel_radius_0" dr="2.5*mm"/>
                <z_layout dr="0" z0="InnerTracker_Barrel_half_length_0-15.05*mm" nz="32"/>
            </layer>
            <layer module="InnerTrackerBarrelModule_01" id="1" vis="InnerTrackerLayerVis" type="4">
                <rphi_layout phi_tilt="0*deg" nphi="38*2" phi0="0" rc="InnerTracker_Barrel_radius_1" dr="2.5*mm"/>
                <z_layout dr="0" z0="InnerTracker_Barrel_half_length_1-15.05*mm" nz="32"/>
            </layer>
            <layer module="InnerTrackerBarrelModule_01" id="2" vis="InnerTrackerLayerVis" type="4">
                <rphi_layout phi_tilt="0*deg" nphi="62*2" phi0="0" rc="InnerTracker_Barrel_radius_2" dr="2.5*mm"/>
                <z_layout dr="0" z0="InnerTracker_Barrel_half_length_2-15.05*mm" nz="46"/>
            </layer>

        </detector>
        
        
        
        <detector id="DetID_IT_Endcap" name="InnerTrackerEndcap" type="TrackerEndcap_o2_v04" readout="InnerTrackerEndcapCollection" reflect="true" region="InnerTrackerEndcapRegion">
            <envelope vis="OTVis">
                <shape type="Assembly"/>
            </envelope>
            <comment>Silicon Inner Tracker Endcaps</comment>
            
            <type_flags type=" DetType_TRACKER + DetType_ENDCAP"/>

            <module name="InnerTrackerEndcapModule_2x2" vis="InnerTrackerModuleVis">
            <trd x="30.2*mm" y="30.2*mm"/>                              
                <!-- Build slices top-down from innermost slice (closest to IP) to outer-most (away from IP)-->
                <module_component thickness="0.05*mm"  material="Aluminum"        sensitive="false"/>
                <module_component thickness="0.1*mm"   material="Kapton"          sensitive="false"/>                
                <module_component thickness="0.12*mm"  material="CarbonFiber_D"   sensitive="false"/>
                <module_component thickness="0.3*mm"   material="Silicon"         sensitive="true"/> 
                <module_component thickness="0.1*mm"   material="Epoxy"           sensitive="false"/> 

                <module_component thickness="0.11*mm"  material="Graphite"        sensitive="false"/>                                                
                <module_component thickness="0.11*mm"  material="Graphite"        sensitive="false"/>                                                
                <module_component thickness="0.1*mm"   material="Kapton"          sensitive="false"/>                                                  
                <module_component thickness="0.12*mm"  material="CarbonFiber"     sensitive="false"/> 
                <module_component thickness="0.1*mm"   material="Epoxy"           sensitive="false"/>                

                <module_component thickness="0.2*mm"   material="Aluminum"        sensitive="false"/>           
                <module_component thickness="0.2*mm"   material="Kapton"          sensitive="false"/>
                <module_component thickness="0.1*mm"   material="Epoxy"           sensitive="false"/>  
            </module> 
            <module name="InnerTrackerEndcapModule_3x2" vis="InnerTrackerModuleVis">
            <trd x="45.3*mm" y="30.2*mm"/>                              
                <!-- Build slices top-down from innermost slice (closest to IP) to outer-most (away from IP)-->
                <module_component thickness="0.05*mm"  material="Aluminum"        sensitive="false"/>
                <module_component thickness="0.1*mm"   material="Kapton"          sensitive="false"/>                
                <module_component thickness="0.12*mm"  material="CarbonFiber_D"   sensitive="false"/>
                <module_component thickness="0.3*mm"   material="Silicon"         sensitive="true"/> 
                <module_component thickness="0.1*mm"   material="Epoxy"           sensitive="false"/> 

                <module_component thickness="0.11*mm"  material="Graphite"        sensitive="false"/>                                                
                <module_component thickness="0.11*mm"  material="Graphite"        sensitive="false"/>                                                
                <module_component thickness="0.1*mm"   material="Kapton"          sensitive="false"/>                                                  
                <module_component thickness="0.12*mm"  material="CarbonFiber"     sensitive="false"/> 
                <module_component thickness="0.1*mm"   material="Epoxy"           sensitive="false"/>                

                <module_component thickness="0.2*mm"   material="Aluminum"        sensitive="false"/>           
                <module_component thickness="0.2*mm"   material="Kapton"          sensitive="false"/>
                <module_component thickness="0.1*mm"   material="Epoxy"           sensitive="false"/>  
            </module> 
            <module name="InnerTrackerEndcapModule_3x4" vis="InnerTrackerModuleVis">
            <trd x="45.3*mm" y="60.4*mm"/>                              
                <!-- Build slices top-down from innermost slice (closest to IP) to outer-most (away from IP)-->
                <module_component thickness="0.05*mm"  material="Aluminum"        sensitive="false"/>
                <module_component thickness="0.1*mm"   material="Kapton"          sensitive="false"/>                
                <module_component thickness="0.12*mm"  material="CarbonFiber_D"   sensitive="false"/>
                <module_component thickness="0.3*mm"   material="Silicon"         sensitive="true"/> 
                <module_component thickness="0.1*mm"   material="Epoxy"           sensitive="false"/> 

                <module_component thickness="0.11*mm"  material="Graphite"        sensitive="false"/>                                                
                <module_component thickness="0.11*mm"  material="Graphite"        sensitive="false"/>                                                
                <module_component thickness="0.1*mm"   material="Kapton"          sensitive="false"/>                                                  
                <module_component thickness="0.12*mm"  material="CarbonFiber"     sensitive="false"/> 
                <module_component thickness="0.1*mm"   material="Epoxy"           sensitive="false"/>                

                <module_component thickness="0.2*mm"   material="Aluminum"        sensitive="false"/>           
                <module_component thickness="0.2*mm"   material="Kapton"          sensitive="false"/>
                <module_component thickness="0.1*mm"   material="Epoxy"           sensitive="false"/>  
            </module> 
            <module name="InnerTrackerEndcapModule_5x2" vis="InnerTrackerModuleVis">
            <trd x="75.5*mm" y="30.2*mm"/>                              
                <!-- Build slices top-down from innermost slice (closest to IP) to outer-most (away from IP)-->
                <module_component thickness="0.05*mm"  material="Aluminum"        sensitive="false"/>
                <module_component thickness="0.1*mm"   material="Kapton"          sensitive="false"/>                
                <module_component thickness="0.12*mm"  material="CarbonFiber_D"   sensitive="false"/>
                <module_component thickness="0.3*mm"   material="Silicon"         sensitive="true"/> 
                <module_component thickness="0.1*mm"   material="Epoxy"           sensitive="false"/> 

                <module_component thickness="0.11*mm"  material="Graphite"        sensitive="false"/>                                                
                <module_component thickness="0.11*mm"  material="Graphite"        sensitive="false"/>                                                
                <module_component thickness="0.1*mm"   material="Kapton"          sensitive="false"/>                                                  
                <module_component thickness="0.12*mm"  material="CarbonFiber"     sensitive="false"/> 
                <module_component thickness="0.1*mm"   material="Epoxy"           sensitive="false"/>                

                <module_component thickness="0.2*mm"   material="Aluminum"        sensitive="false"/>           
                <module_component thickness="0.2*mm"   material="Kapton"          sensitive="false"/>
                <module_component thickness="0.1*mm"   material="Epoxy"           sensitive="false"/>  
            </module> 
            <module name="InnerTrackerEndcapModule_5x4" vis="InnerTrackerModuleVis">
            <trd x="75.5*mm" y="60.4*mm"/>                              
                <!-- Build slices top-down from innermost slice (closest to IP) to outer-most (away from IP)-->
                <module_component thickness="0.05*mm"  material="Aluminum"        sensitive="false"/>
                <module_component thickness="0.1*mm"   material="Kapton"          sensitive="false"/>                
                <module_component thickness="0.12*mm"  material="CarbonFiber_D"   sensitive="false"/>
                <module_component thickness="0.3*mm"   material="Silicon"         sensitive="true"/> 
                <module_component thickness="0.1*mm"   material="Epoxy"           sensitive="false"/> 

                <module_component thickness="0.11*mm"  material="Graphite"        sensitive="false"/>                                                
                <module_component thickness="0.11*mm"  material="Graphite"        sensitive="false"/>                                                
                <module_component thickness="0.1*mm"   material="Kapton"          sensitive="false"/>                                                  
                <module_component thickness="0.12*mm"  material="CarbonFiber"     sensitive="false"/> 
                <module_component thickness="0.1*mm"   material="Epoxy"           sensitive="false"/>                

                <module_component thickness="0.2*mm"   material="Aluminum"        sensitive="false"/>           
                <module_component thickness="0.2*mm"   material="Kapton"          sensitive="false"/>
                <module_component thickness="0.1*mm"   material="Epoxy"           sensitive="false"/>  
            </module> 
            <module name="InnerTrackerEndcapModule_5x6" vis="InnerTrackerModuleVis">
            <trd x="75.5*mm" y="90.6*mm"/>                              
                <!-- Build slices top-down from innermost slice (closest to IP) to outer-most (away from IP)-->
                <module_component thickness="0.05*mm"  material="Aluminum"        sensitive="false"/>
                <module_component thickness="0.1*mm"   material="Kapton"          sensitive="false"/>                
                <module_component thickness="0.12*mm"  material="CarbonFiber_D"   sensitive="false"/>
                <module_component thickness="0.3*mm"   material="Silicon"         sensitive="true"/> 
                <module_component thickness="0.1*mm"   material="Epoxy"           sensitive="false"/> 

                <module_component thickness="0.11*mm"  material="Graphite"        sensitive="false"/>                                                
                <module_component thickness="0.11*mm"  material="Graphite"        sensitive="false"/>                                                
                <module_component thickness="0.1*mm"   material="Kapton"          sensitive="false"/>                                                  
                <module_component thickness="0.12*mm"  material="CarbonFiber"     sensitive="false"/> 
                <module_component thickness="0.1*mm"   material="Epoxy"           sensitive="false"/>                

                <module_component thickness="0.2*mm"   material="Aluminum"        sensitive="false"/>           
                <module_component thickness="0.2*mm"   material="Kapton"          sensitive="false"/>
                <module_component thickness="0.1*mm"   material="Epoxy"           sensitive="false"/>  
            </module>
            <module name="InnerTrackerEndcapModule_5x7" vis="InnerTrackerModuleVis">
            <trd x="75.5*mm" y="105.7*mm"/>                              
                <!-- Build slices top-down from innermost slice (closest to IP) to outer-most (away from IP)-->
                <module_component thickness="0.05*mm"  material="Aluminum"        sensitive="false"/>
                <module_component thickness="0.1*mm"   material="Kapton"          sensitive="false"/>                
                <module_component thickness="0.12*mm"  material="CarbonFiber_D"   sensitive="false"/>
                <module_component thickness="0.3*mm"   material="Silicon"         sensitive="true"/> 
                <module_component thickness="0.1*mm"   material="Epoxy"           sensitive="false"/> 

                <module_component thickness="0.11*mm"  material="Graphite"        sensitive="false"/>                                                
                <module_component thickness="0.11*mm"  material="Graphite"        sensitive="false"/>                                                
                <module_component thickness="0.1*mm"   material="Kapton"          sensitive="false"/>                                                  
                <module_component thickness="0.12*mm"  material="CarbonFiber"     sensitive="false"/> 
                <module_component thickness="0.1*mm"   material="Epoxy"           sensitive="false"/>                

                <module_component thickness="0.2*mm"   material="Aluminum"        sensitive="false"/>           
                <module_component thickness="0.2*mm"   material="Kapton"          sensitive="false"/>
                <module_component thickness="0.1*mm"   material="Epoxy"           sensitive="false"/>  
            </module>
            <module name="InnerTrackerEndcapModule_5x8" vis="InnerTrackerModuleVis">
            <trd x="75.5*mm" y="120.8*mm"/>                              
                <!-- Build slices top-down from innermost slice (closest to IP) to outer-most (away from IP)-->
                <module_component thickness="0.05*mm"  material="Aluminum"        sensitive="false"/>
                <module_component thickness="0.1*mm"   material="Kapton"          sensitive="false"/>                
                <module_component thickness="0.12*mm"  material="CarbonFiber_D"   sensitive="false"/>
                <module_component thickness="0.3*mm"   material="Silicon"         sensitive="true"/> 
                <module_component thickness="0.1*mm"   material="Epoxy"           sensitive="false"/> 

                <module_component thickness="0.11*mm"  material="Graphite"        sensitive="false"/>                                                
                <module_component thickness="0.11*mm"  material="Graphite"        sensitive="false"/>                                                
                <module_component thickness="0.1*mm"   material="Kapton"          sensitive="false"/>                                                  
                <module_component thickness="0.12*mm"  material="CarbonFiber"     sensitive="false"/> 
                <module_component thickness="0.1*mm"   material="Epoxy"           sensitive="false"/>                

                <module_component thickness="0.2*mm"   material="Aluminum"        sensitive="false"/>           
                <module_component thickness="0.2*mm"   material="Kapton"          sensitive="false"/>
                <module_component thickness="0.1*mm"   material="Epoxy"           sensitive="false"/>  
            </module>            
            <module name="InnerTrackerEndcapModule_7x8" vis="InnerTrackerModuleVis">
            <trd x="105.7*mm" y="120.8*mm"/>                              
                <!-- Build slices top-down from innermost slice (closest to IP) to outer-most (away from IP)-->
                <module_component thickness="0.05*mm"  material="Aluminum"        sensitive="false"/>
                <module_component thickness="0.1*mm"   material="Kapton"          sensitive="false"/>                
                <module_component thickness="0.12*mm"  material="CarbonFiber_D"   sensitive="false"/>
                <module_component thickness="0.3*mm"   material="Silicon"         sensitive="true"/> 
                <module_component thickness="0.1*mm"   material="Epoxy"           sensitive="false"/> 

                <module_component thickness="0.11*mm"  material="Graphite"        sensitive="false"/>                                                
                <module_component thickness="0.11*mm"  material="Graphite"        sensitive="false"/>                                                
                <module_component thickness="0.1*mm"   material="Kapton"          sensitive="false"/>                                                  
                <module_component thickness="0.12*mm"  material="CarbonFiber"     sensitive="false"/> 
                <module_component thickness="0.1*mm"   material="Epoxy"           sensitive="false"/>                

                <module_component thickness="0.2*mm"   material="Aluminum"        sensitive="false"/>           
                <module_component thickness="0.2*mm"   material="Kapton"          sensitive="false"/>
                <module_component thickness="0.1*mm"   material="Epoxy"           sensitive="false"/>  
            </module>
            <module name="InnerTrackerEndcapModule_8x5" vis="InnerTrackerModuleVis">
            <trd x="120.8*mm" y="75.5*mm"/>                              
                <!-- Build slices top-down from innermost slice (closest to IP) to outer-most (away from IP)-->
                <module_component thickness="0.05*mm"  material="Aluminum"        sensitive="false"/>
                <module_component thickness="0.1*mm"   material="Kapton"          sensitive="false"/>                
                <module_component thickness="0.12*mm"  material="CarbonFiber_D"   sensitive="false"/>
                <module_component thickness="0.3*mm"   material="Silicon"         sensitive="true"/> 
                <module_component thickness="0.1*mm"   material="Epoxy"           sensitive="false"/> 

                <module_component thickness="0.11*mm"  material="Graphite"        sensitive="false"/>                                                
                <module_component thickness="0.11*mm"  material="Graphite"        sensitive="false"/>                                                
                <module_component thickness="0.1*mm"   material="Kapton"          sensitive="false"/>                                                  
                <module_component thickness="0.12*mm"  material="CarbonFiber"     sensitive="false"/> 
                <module_component thickness="0.1*mm"   material="Epoxy"           sensitive="false"/>                

                <module_component thickness="0.2*mm"   material="Aluminum"        sensitive="false"/>           
                <module_component thickness="0.2*mm"   material="Kapton"          sensitive="false"/>
                <module_component thickness="0.1*mm"   material="Epoxy"           sensitive="false"/>  
            </module>
            <module name="InnerTrackerEndcapModule_8x7" vis="InnerTrackerModuleVis">
            <trd x="120.8*mm" y="105.7*mm"/>                              
                <!-- Build slices top-down from innermost slice (closest to IP) to outer-most (away from IP)-->
                <module_component thickness="0.05*mm"  material="Aluminum"        sensitive="false"/>
                <module_component thickness="0.1*mm"   material="Kapton"          sensitive="false"/>                
                <module_component thickness="0.12*mm"  material="CarbonFiber_D"   sensitive="false"/>
                <module_component thickness="0.3*mm"   material="Silicon"         sensitive="true"/> 
                <module_component thickness="0.1*mm"   material="Epoxy"           sensitive="false"/> 

                <module_component thickness="0.11*mm"  material="Graphite"        sensitive="false"/>                                                
                <module_component thickness="0.11*mm"  material="Graphite"        sensitive="false"/>                                                
                <module_component thickness="0.1*mm"   material="Kapton"          sensitive="false"/>                                                  
                <module_component thickness="0.12*mm"  material="CarbonFiber"     sensitive="false"/> 
                <module_component thickness="0.1*mm"   material="Epoxy"           sensitive="false"/>                

                <module_component thickness="0.2*mm"   material="Aluminum"        sensitive="false"/>           
                <module_component thickness="0.2*mm"   material="Kapton"          sensitive="false"/>
                <module_component thickness="0.1*mm"   material="Epoxy"           sensitive="false"/>  
            </module>
            <module name="InnerTrackerEndcapModule_9x8" vis="InnerTrackerModuleVis">
            <trd x="135.9*mm" y="120.8*mm"/>                              
                <!-- Build slices top-down from innermost slice (closest to IP) to outer-most (away from IP)-->
                <module_component thickness="0.05*mm"  material="Aluminum"        sensitive="false"/>
                <module_component thickness="0.1*mm"   material="Kapton"          sensitive="false"/>                
                <module_component thickness="0.12*mm"  material="CarbonFiber_D"   sensitive="false"/>
                <module_component thickness="0.3*mm"   material="Silicon"         sensitive="true"/> 
                <module_component thickness="0.1*mm"   material="Epoxy"           sensitive="false"/> 

                <module_component thickness="0.11*mm"  material="Graphite"        sensitive="false"/>                                                
                <module_component thickness="0.11*mm"  material="Graphite"        sensitive="false"/>                                                
                <module_component thickness="0.1*mm"   material="Kapton"          sensitive="false"/>                                                  
                <module_component thickness="0.12*mm"  material="CarbonFiber"     sensitive="false"/> 
                <module_component thickness="0.1*mm"   material="Epoxy"           sensitive="false"/>                

                <module_component thickness="0.2*mm"   material="Aluminum"        sensitive="false"/>           
                <module_component thickness="0.2*mm"   material="Kapton"          sensitive="false"/>
                <module_component thickness="0.1*mm"   material="Epoxy"           sensitive="false"/>  
            </module> 
            <module name="InnerTrackerEndcapModule_9x9" vis="InnerTrackerModuleVis">
            <trd x="135.9*mm" y="135.9*mm"/>                              
                <!-- Build slices top-down from innermost slice (closest to IP) to outer-most (away from IP)-->
                <module_component thickness="0.05*mm"  material="Aluminum"        sensitive="false"/>
                <module_component thickness="0.1*mm"   material="Kapton"          sensitive="false"/>                
                <module_component thickness="0.12*mm"  material="CarbonFiber_D"   sensitive="false"/>
                <module_component thickness="0.3*mm"   material="Silicon"         sensitive="true"/> 
                <module_component thickness="0.1*mm"   material="Epoxy"           sensitive="false"/> 

                <module_component thickness="0.11*mm"  material="Graphite"        sensitive="false"/>                                                
                <module_component thickness="0.11*mm"  material="Graphite"        sensitive="false"/>                                                
                <module_component thickness="0.1*mm"   material="Kapton"          sensitive="false"/>                                                  
                <module_component thickness="0.12*mm"  material="CarbonFiber"     sensitive="false"/> 
                <module_component thickness="0.1*mm"   material="Epoxy"           sensitive="false"/>                

                <module_component thickness="0.2*mm"   material="Aluminum"        sensitive="false"/>           
                <module_component thickness="0.2*mm"   material="Kapton"          sensitive="false"/>
                <module_component thickness="0.1*mm"   material="Epoxy"           sensitive="false"/>  
            </module> 
            <module name="InnerTrackerEndcapModule_11x2" vis="InnerTrackerModuleVis">
            <trd x="166.1*mm" y="30.2*mm"/>                              
                <!-- Build slices top-down from innermost slice (closest to IP) to outer-most (away from IP)-->
                <module_component thickness="0.05*mm"  material="Aluminum"        sensitive="false"/>
                <module_component thickness="0.1*mm"   material="Kapton"          sensitive="false"/>                
                <module_component thickness="0.12*mm"  material="CarbonFiber_D"   sensitive="false"/>
                <module_component thickness="0.3*mm"   material="Silicon"         sensitive="true"/> 
                <module_component thickness="0.1*mm"   material="Epoxy"           sensitive="false"/> 

                <module_component thickness="0.11*mm"  material="Graphite"        sensitive="false"/>                                                
                <module_component thickness="0.11*mm"  material="Graphite"        sensitive="false"/>                                                
                <module_component thickness="0.1*mm"   material="Kapton"          sensitive="false"/>                                                  
                <module_component thickness="0.12*mm"  material="CarbonFiber"     sensitive="false"/> 
                <module_component thickness="0.1*mm"   material="Epoxy"           sensitive="false"/>                

                <module_component thickness="0.2*mm"   material="Aluminum"        sensitive="false"/>           
                <module_component thickness="0.2*mm"   material="Kapton"          sensitive="false"/>
                <module_component thickness="0.1*mm"   material="Epoxy"           sensitive="false"/>  
            </module> 
            <module name="InnerTrackerEndcapModule_11x3" vis="InnerTrackerModuleVis">
            <trd x="166.1*mm" y="45.3*mm"/>                              
                <!-- Build slices top-down from innermost slice (closest to IP) to outer-most (away from IP)-->
                <module_component thickness="0.05*mm"  material="Aluminum"        sensitive="false"/>
                <module_component thickness="0.1*mm"   material="Kapton"          sensitive="false"/>                
                <module_component thickness="0.12*mm"  material="CarbonFiber_D"   sensitive="false"/>
                <module_component thickness="0.3*mm"   material="Silicon"         sensitive="true"/> 
                <module_component thickness="0.1*mm"   material="Epoxy"           sensitive="false"/> 

                <module_component thickness="0.11*mm"  material="Graphite"        sensitive="false"/>                                                
                <module_component thickness="0.11*mm"  material="Graphite"        sensitive="false"/>                                                
                <module_component thickness="0.1*mm"   material="Kapton"          sensitive="false"/>                                                  
                <module_component thickness="0.12*mm"  material="CarbonFiber"     sensitive="false"/> 
                <module_component thickness="0.1*mm"   material="Epoxy"           sensitive="false"/>                

                <module_component thickness="0.2*mm"   material="Aluminum"        sensitive="false"/>           
                <module_component thickness="0.2*mm"   material="Kapton"          sensitive="false"/>
                <module_component thickness="0.1*mm"   material="Epoxy"           sensitive="false"/>  
            </module>                      
              
                        
            
            <layer id="0">
                <ring r="InnerTracker_Endcap_radius_0"        zstart="InnerTracker_Endcap_z_0" nmodules="24" dz="2*mm" module="InnerTrackerEndcapModule_2x2" phi0="0"/>
                <ring r="InnerTracker_Endcap_radius_0+2*ITM"  zstart="InnerTracker_Endcap_z_0" nmodules="24" dz="2*mm" module="InnerTrackerEndcapModule_3x4" phi0="0"/>                
                <ring r="InnerTracker_Endcap_radius_0+6*ITM"  zstart="InnerTracker_Endcap_z_0" nmodules="24" dz="2*mm" module="InnerTrackerEndcapModule_5x8" phi0="0"/>                              
                <ring r="InnerTracker_Endcap_radius_0+14*ITM" zstart="InnerTracker_Endcap_z_0" nmodules="24" dz="2*mm" module="InnerTrackerEndcapModule_7x8" phi0="0"/>                              
            </layer>

            <layer id="1">
                <ring r="InnerTracker_Endcap_radius_1"        zstart="InnerTracker_Endcap_z_1" nmodules="24" dz="2*mm" module="InnerTrackerEndcapModule_3x4"  phi0="0"/>
                <ring r="InnerTracker_Endcap_radius_1+4*ITM"  zstart="InnerTracker_Endcap_z_1" nmodules="24" dz="2*mm" module="InnerTrackerEndcapModule_5x7"  phi0="0"/>                
                <ring r="InnerTracker_Endcap_radius_1+11*ITM" zstart="InnerTracker_Endcap_z_1" nmodules="24" dz="2*mm" module="InnerTrackerEndcapModule_7x8"  phi0="0"/>                              
                <ring r="InnerTracker_Endcap_radius_1+19*ITM" zstart="InnerTracker_Endcap_z_1" nmodules="24" dz="2*mm" module="InnerTrackerEndcapModule_9x8"  phi0="0"/>                              
                <ring r="InnerTracker_Endcap_radius_1+27*ITM" zstart="InnerTracker_Endcap_z_1" nmodules="24" dz="2*mm" module="InnerTrackerEndcapModule_11x3" phi0="0"/>                
            </layer>

            <layer id="2">
                <ring r="InnerTracker_Endcap_radius_2"        zstart="InnerTracker_Endcap_z_2" nmodules="24" dz="2*mm" module="InnerTrackerEndcapModule_3x2"  phi0="0"/>
                <ring r="InnerTracker_Endcap_radius_2+2*ITM"  zstart="InnerTracker_Endcap_z_2" nmodules="24" dz="2*mm" module="InnerTrackerEndcapModule_5x7"  phi0="0"/>                
                <ring r="InnerTracker_Endcap_radius_2+9*ITM"  zstart="InnerTracker_Endcap_z_2" nmodules="24" dz="2*mm" module="InnerTrackerEndcapModule_7x8"  phi0="0"/>                              
                <ring r="InnerTracker_Endcap_radius_2+17*ITM" zstart="InnerTracker_Endcap_z_2" nmodules="24" dz="2*mm" module="InnerTrackerEndcapModule_9x8"  phi0="0"/>                              
                <ring r="InnerTracker_Endcap_radius_2+25*ITM" zstart="InnerTracker_Endcap_z_2" nmodules="24" dz="2*mm" module="InnerTrackerEndcapModule_11x3" phi0="0"/>                
            </layer>

            <layer id="3">
                <ring r="InnerTracker_Endcap_radius_3"        zstart="InnerTracker_Endcap_z_3" nmodules="24" dz="2*mm" module="InnerTrackerEndcapModule_5x6"  phi0="0"/>
                <ring r="InnerTracker_Endcap_radius_3+6*ITM"  zstart="InnerTracker_Endcap_z_3" nmodules="24" dz="2*mm" module="InnerTrackerEndcapModule_7x8"  phi0="0"/>                
                <ring r="InnerTracker_Endcap_radius_3+14*ITM" zstart="InnerTracker_Endcap_z_3" nmodules="24" dz="2*mm" module="InnerTrackerEndcapModule_9x9"  phi0="0"/>                              
                <ring r="InnerTracker_Endcap_radius_3+23*ITM" zstart="InnerTracker_Endcap_z_3" nmodules="24" dz="2*mm" module="InnerTrackerEndcapModule_11x2"  phi0="0"/>                              
            </layer>       
            
            <layer id="4">
                <ring r="InnerTracker_Endcap_radius_4"        zstart="InnerTracker_Endcap_z_4" nmodules="24" dz="2*mm" module="InnerTrackerEndcapModule_5x4"  phi0="0"/>
                <ring r="InnerTracker_Endcap_radius_4+4*ITM"  zstart="InnerTracker_Endcap_z_4" nmodules="24" dz="2*mm" module="InnerTrackerEndcapModule_7x8"  phi0="0"/>                
                <ring r="InnerTracker_Endcap_radius_4+12*ITM" zstart="InnerTracker_Endcap_z_4" nmodules="24" dz="2*mm" module="InnerTrackerEndcapModule_9x9"  phi0="0"/>                              
                <ring r="InnerTracker_Endcap_radius_4+21*ITM" zstart="InnerTracker_Endcap_z_4" nmodules="24" dz="2*mm" module="InnerTrackerEndcapModule_11x2" phi0="0"/>                              
            </layer>

            <layer id="5">
                <ring r="InnerTracker_Endcap_radius_5"        zstart="InnerTracker_Endcap_z_5" nmodules="24" dz="2*mm" module="InnerTrackerEndcapModule_5x2"  phi0="0"/>
                <ring r="InnerTracker_Endcap_radius_5+2*ITM"  zstart="InnerTracker_Endcap_z_5" nmodules="24" dz="2*mm" module="InnerTrackerEndcapModule_7x8"  phi0="0"/>                
                <ring r="InnerTracker_Endcap_radius_5+10*ITM" zstart="InnerTracker_Endcap_z_5" nmodules="24" dz="2*mm" module="InnerTrackerEndcapModule_9x9"  phi0="0"/>                              
                <ring r="InnerTracker_Endcap_radius_5+19*ITM" zstart="InnerTracker_Endcap_z_5" nmodules="24" dz="2*mm" module="InnerTrackerEndcapModule_11x2" phi0="0"/>                              
            </layer>
            
            <layer id="6">
                <ring r="InnerTracker_Endcap_radius_6"        zstart="InnerTracker_Endcap_z_6" nmodules="24" dz="2*mm" module="InnerTrackerEndcapModule_7x8"  phi0="0"/>
                <ring r="InnerTracker_Endcap_radius_6+8*ITM"  zstart="InnerTracker_Endcap_z_6" nmodules="24" dz="2*mm" module="InnerTrackerEndcapModule_9x9"  phi0="0"/>                
                <ring r="InnerTracker_Endcap_radius_6+17*ITM" zstart="InnerTracker_Endcap_z_6" nmodules="24" dz="2*mm" module="InnerTrackerEndcapModule_11x2"  phi0="0"/>                              
            </layer>            

        </detector>
        
        
        <detector name="InnerTrackerBarrelSupport" type="TrackerBarrelSupport_o1_v01" id="0"  reflect="true" region="InnerTrackerBarrelRegion">
            <envelope>
                <shape type="Assembly"/>
            </envelope>
            <layer id="1" inner_r="InnerTracker_Barrel_radius_0+0.5*cm" outer_z="InnerTracker_Barrel_half_length_0" vis="SupportVis">
                <slice material="CarbonFiber" thickness="0.17/3.5447*cm" />
            </layer>
            <layer id="2" inner_r="InnerTracker_Barrel_radius_1+0.5*cm" outer_z="InnerTracker_Barrel_half_length_1" vis="SupportVis">
                <slice material="CarbonFiber" thickness="0.17/3.5447*cm" />
            </layer>
            <layer id="3" inner_r="InnerTracker_Barrel_radius_2+0.5*cm" outer_z="InnerTracker_Barrel_half_length_2" vis="SupportVis">
                <slice material="CarbonFiber" thickness="0.17/3.5447*cm" />
            </layer>
	        <layer id="4" inner_r="InnerTracker_outer_radius-1*cm" outer_z="InnerTracker_half_length" vis="InterlinkVis">
				<slice material="CarbonFiber" thickness="1.15/3.5447*cm" />
            </layer>
        </detector>
        

        <detector name="InnerTrackerEndcapSupport" type="TrackerEndcapSupport_o1_v01" reflect="true" region="InnerTrackerEndcapRegion">
		   <envelope>
                <shape type="Assembly"/>
           </envelope>
           <layer id="0" inner_r="InnerTracker_Endcap_radius_0" inner_z="InnerTracker_Endcap_z_0+1*cm" outer_r="405*mm" vis="SupportVis">
	           <slice material="CarbonFiber" thickness="0.33/3.5447*cm" />
           </layer>
           <layer id="1" inner_r="InnerTracker_Endcap_radius_1" inner_z="InnerTracker_Endcap_z_1+1*cm" outer_r="555*mm" vis="SupportVis">
	           <slice material="CarbonFiber" thickness="0.33/3.5447*cm" />
           </layer>
           <layer id="2" inner_r="InnerTracker_Endcap_radius_2" inner_z="InnerTracker_Endcap_z_2-1*cm" outer_r="555*mm" vis="SupportVis">
	           <slice material="CarbonFiber" thickness="0.33/3.5447*cm" />
           </layer>
           <layer id="3" inner_r="InnerTracker_Endcap_radius_3+10*env_safety" inner_z="InnerTracker_Endcap_z_3+1*cm" outer_r="555*mm" vis="SupportVis">
	           <slice material="CarbonFiber" thickness="0.33/3.5447*cm" />
           </layer>
           <layer id="4" inner_r="InnerTracker_Endcap_radius_4" inner_z="InnerTracker_Endcap_z_4-1*cm" outer_r="555*mm" vis="SupportVis">
	           <slice material="CarbonFiber" thickness="0.33/3.5447*cm" />
           </layer>
           <layer id="5" inner_r="InnerTracker_Endcap_radius_5+10*env_safety" inner_z="InnerTracker_Endcap_z_5+1*cm" outer_r="555*mm" vis="SupportVis">
	           <slice material="CarbonFiber" thickness="0.33/3.5447*cm" />
           </layer>   
           <layer id="6" inner_r="InnerTracker_Endcap_radius_6" inner_z="InnerTracker_Endcap_z_6-1*cm" outer_r="555*mm" vis="SupportVis">
	           <slice material="CarbonFiber" thickness="0.33/3.5447*cm" />
           </layer>
           <layer id="7" inner_r="InnerTracker_Barrel_radius_0" inner_z="InnerTracker_Barrel_half_length_1+2*cm" outer_r="InnerTracker_Barrel_radius_2-2*cm" vis="InterlinkVis">
	           <slice material="CarbonFiber" thickness="0.3/3.5447*cm" />
           </layer>
           <layer id="8" inner_r="InnerTracker_Barrel_radius_2-2*cm+0.3/3.5447*cm" inner_z="InnerTracker_Barrel_half_length_2+2*cm" outer_r="InnerTracker_outer_radius-1*cm" vis="InterlinkVis">
	           <slice material="CarbonFiber" thickness="0.3/3.5447*cm" />
           </layer>                                           
        </detector>
        
        <detector name="InnerTrackerInterlink" type="ConicalSupport_o1_v01" reflect="true" region="InnerTrackerEndcapRegion">
          <envelope>
            <shape type="Assembly"/>
          </envelope>
           <section start="InnerTracker_Barrel_half_length_1+2*cm"  end="InnerTracker_Barrel_half_length_2+2*cm"        rMin1="InnerTracker_Barrel_radius_2-2*cm"  rMin2="InnerTracker_Barrel_radius_2-2*cm" rMax1="InnerTracker_Barrel_radius_2-2*cm+0.3/3.5447*cm"           rMax2="InnerTracker_Barrel_radius_2-2*cm+0.3/3.5447*cm" material="CarbonFiber" name="ConeSupport" vis="InterlinkVis"/>
        </detector>        
        
        
        <detector name="BeampipeShell" type="ConicalSupport_o1_v01" reflect="true" region="BeampipeRegion">
          <envelope>
            <shape type="Assembly"/>
          </envelope>
            <section start="337*mm"  end="ConeBeamPipe_zmax"        rMin1="29.4*mm+5*mm"  rMin2="235.2*mm+5*mm" rMax1="33.4*mm+6*mm"           rMax2="ConeBeamPipe_rmax+6*mm" material="CarbonFiber" name="ConeSupport" vis="SupportVis"/>
            <section start="2080*mm" end="InnerTracker_half_length" rMin1="235.2*mm+5*mm" rMin2="235.2*mm+5*mm" rMax1="ConeBeamPipe_rmax+6*mm" rMax2="ConeBeamPipe_rmax+6*mm" material="CarbonFiber" name="TubeSupport" vis="SupportVis"/>
        </detector>
        
        
    </detectors>

    <plugins>
        <plugin name="DD4hep_GenericSurfaceInstallerPlugin">
            <argument value="InnerTrackerBarrel"/>
            <argument value="dimension=2"/>
            <argument value="u_x=-1."/>
            <argument value="v_y=-1."/>
            <argument value="n_z=1."/>
        </plugin>	
        <plugin name="DD4hep_GenericSurfaceInstallerPlugin">
            <argument value="InnerTrackerEndcap"/>
            <argument value="dimension=2"/>
            <argument value="u_x=-1."/>
            <argument value="v_y=1."/>
            <argument value="n_z=1."/>
        </plugin>
    </plugins>
    
</lccdd>
